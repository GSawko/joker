(ns joker.csv)

(defn ^:private csv-seq*
  [rdr]
  (when-let [line (joker.csv/csv-read rdr)]
    (cons line (lazy-seq (joker.csv/csv-seq* rdr)))))

(defn csv-seq
  "Returns the csv records from rdr as a lazy sequence.
  rdr must be io.Reader or CSVReader"
  {:added "1.0"}
  [rdr]
  (cond
    (instance? CSVReader rdr)
    (csv-seq* rdr)

    :else
    (csv-seq* (joker.csv/csv-reader rdr))))

